chrome.runtime.onMessage.addListener(((e,t,o)=>{if("sendToContent"===e.action)return chrome.tabs.query({active:!0,currentWindow:!0},(t=>{0!==t.length&&chrome.tabs.sendMessage(t[0].id,{action:"processMessage",data:e.data},(e=>{o(e)}))})),!0})),chrome.runtime.onMessage.addListener(((e,t,o)=>"setToken"===e.action?(chrome.storage.local.set({autotoken69:e.token69},(()=>{})),chrome.tabs.query({active:!0,currentWindow:!0},(t=>{0!==t.length&&chrome.tabs.sendMessage(t[0].id,{action:"setautotoken69",token69:e.token69})})),!0):"removeToken"===e.action?(chrome.storage.local.remove(["autotoken69"],(()=>{o({success:!0})})),!0):void 0)),chrome.runtime.onMessage.addListener(((e,t,o)=>{if("givetoken"===e.action)return chrome.storage.local.get("autotoken69",(e=>{e.autotoken69?chrome.tabs.query({active:!0,currentWindow:!0},(t=>{0!==t.length?chrome.tabs.sendMessage(t[0].id,{action:"setautotoken69",token69:e.autotoken69},(e=>{o(e||{success:!0})})):o({success:!1,error:"No active tab found."})})):o({success:!1,error:"No token found."})})),!0})),chrome.runtime.onMessage.addListener(((e,t,o)=>{if("getTabInfo"===e.action)return chrome.tabs.query({active:!0,currentWindow:!0},(e=>{if(0===e.length)return;const t=e[0];o({url:t.url,title:t.title,favicon:t.favIconUrl})})),!0})),chrome.runtime.onStartup.addListener((()=>{chrome.storage.local.get(null,(e=>{if(chrome.runtime.lastError)return;const t=Object.keys(e).filter((e=>"autotoken69"!==e));t.length>0&&chrome.storage.local.remove(t,(()=>{chrome.runtime.lastError||chrome.storage.local.get(["autotoken69"],(e=>{const t=e.autotoken69;t&&fetch("https://autonotebackend.shadowbites10.workers.dev/getallurl",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(4)}).then((e=>e.json())).then((e=>{e.success&&e.res.file.forEach((e=>{null!=e.url&&chrome.storage.local.set({[e.url.url]:e.url.file_id},(()=>{chrome.runtime.lastError}))}))})).catch((e=>{}))}))}))}))}));
//# sourceMappingURL=background.js.map